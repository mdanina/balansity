# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö - –ü—Ä–æ–≤–µ—Ä–∫–∞

## ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### 1. –¢–∞–±–ª–∏—Ü–∞ `users` (–†–æ–¥–∏—Ç–µ–ª—å)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –†–æ–¥–∏—Ç–µ–ª—å, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ–∫–∞–ø (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
- **–°–≤—è–∑—å**: `id` = `auth.users.id` (Supabase Auth)
- **–ü—Ä–∏–º–µ—Ä**: –ú–∞—Ä–∏—è (–º–∞–º–∞) —Å–æ–∑–¥–∞–µ—Ç –∞–∫–∫–∞—É–Ω—Ç –∏ –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ–∫–∞–ø –¥–ª—è —Å–≤–æ–µ–≥–æ —Ä–µ–±–µ–Ω–∫–∞

### 2. –¢–∞–±–ª–∏—Ü–∞ `profiles` (–ß–ª–µ–Ω—ã —Å–µ–º—å–∏)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ß–ª–µ–Ω—ã —Å–µ–º—å–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–¥–µ—Ç–∏, –ø–∞—Ä—Ç–Ω–µ—Ä—ã –∏ —Ç.–¥.)
- **–°–≤—è–∑—å**: `user_id` ‚Üí `users.id`
- **–¢–∏–ø—ã**: `'parent' | 'child' | 'partner' | 'sibling' | 'caregiver' | 'other'`
- **–ü—Ä–∏–º–µ—Ä**: 
  - –ü—Ä–æ—Ñ–∏–ª—å —Ä–µ–±–µ–Ω–∫–∞: `{ id: 'uuid-1', user_id: 'maria-uuid', type: 'child', first_name: '–ê–ª–∏—Å–∞', dob: '2013-05-15' }`
  - –ü—Ä–æ—Ñ–∏–ª—å –ø–∞—Ä—Ç–Ω–µ—Ä–∞: `{ id: 'uuid-2', user_id: 'maria-uuid', type: 'partner', first_name: '–ò–≤–∞–Ω' }`

### 3. –¢–∞–±–ª–∏—Ü–∞ `assessments` (–°–µ—Å—Å–∏–∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–µ—Å—Å–∏—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –æ–ø—Ä–æ—Å–Ω–∏–∫–∞ (checkup, parent, family)
- **–°–≤—è–∑—å**: `profile_id` ‚Üí `profiles.id`
- **–í–∞–∂–Ω–æ**: –ß–µ–∫–∞–ø –ø—Ä–∏–≤—è–∑–∞–Ω –∫ –ø—Ä–æ—Ñ–∏–ª—é —Ä–µ–±–µ–Ω–∫–∞, –ù–û –ø—Ä–æ—Ö–æ–¥–∏—Ç –µ–≥–æ —Ä–æ–¥–∏—Ç–µ–ª—å (user)
- **–ü—Ä–∏–º–µ—Ä**: 
  ```sql
  {
    id: 'assessment-uuid',
    profile_id: 'uuid-1',  -- ID –ø—Ä–æ—Ñ–∏–ª—è —Ä–µ–±–µ–Ω–∫–∞ –ê–ª–∏—Å—ã
    assessment_type: 'checkup',
    status: 'completed',
    results_summary: { ... }
  }
  ```

### 4. –¢–∞–±–ª–∏—Ü–∞ `answers` (–û—Ç–≤–µ—Ç—ã)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –æ–ø—Ä–æ—Å–Ω–∏–∫–∞
- **–°–≤—è–∑—å**: `assessment_id` ‚Üí `assessments.id`
- **–ü—Ä–∏–º–µ—Ä**: –û—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã —á–µ–∫–∞–ø–∞ –¥–ª—è –ê–ª–∏—Å—ã

## ‚úÖ –¶–µ–ø–æ—á–∫–∞ —Å–≤—è–∑–µ–π

```
auth.users (–ú–∞—Ä–∏—è)
    ‚Üì
public.users (id = maria-uuid)
    ‚Üì
public.profiles (user_id = maria-uuid)
    ‚îú‚îÄ‚îÄ –ü—Ä–æ—Ñ–∏–ª—å 1: { id: 'alice-profile', type: 'child', first_name: '–ê–ª–∏—Å–∞' }
    ‚îî‚îÄ‚îÄ –ü—Ä–æ—Ñ–∏–ª—å 2: { id: 'ivan-profile', type: 'partner', first_name: '–ò–≤–∞–Ω' }
    ‚Üì
public.assessments (profile_id = alice-profile)
    ‚îî‚îÄ‚îÄ Assessment: { id: 'checkup-1', profile_id: 'alice-profile', assessment_type: 'checkup' }
    ‚Üì
public.answers (assessment_id = checkup-1)
    ‚îî‚îÄ‚îÄ –û—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã —á–µ–∫–∞–ø–∞ –¥–ª—è –ê–ª–∏—Å—ã
```

## ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (RLS)

### –ü–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è `assessments`:
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å assessments —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–≤–æ–∏—Ö profiles
- –ü—Ä–æ–≤–µ—Ä–∫–∞: `profiles.user_id = auth.uid()`
- –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ —Ä–æ–¥–∏—Ç–µ–ª—å –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —á–µ–∫–∞–ø—ã —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–≤–æ–∏—Ö –¥–µ—Ç–µ–π

### –ü–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è `answers`:
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ—Ç–≤–µ—Ç—ã —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–≤–æ–∏—Ö assessments
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ —Ü–µ–ø–æ—á–∫—É: `answers.assessment_id ‚Üí assessments.profile_id ‚Üí profiles.user_id = auth.uid()`

## ‚úÖ –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

1. **–†–æ–¥–∏—Ç–µ–ª—å (user)** —Å–æ–∑–¥–∞–µ—Ç –ø—Ä–æ—Ñ–∏–ª—å —Ä–µ–±–µ–Ω–∫–∞ –≤ `profiles`
2. **–†–æ–¥–∏—Ç–µ–ª—å** –Ω–∞—á–∏–Ω–∞–µ—Ç —á–µ–∫–∞–ø –¥–ª—è —Ä–µ–±–µ–Ω–∫–∞:
   - –í—ã–±–∏—Ä–∞–µ—Ç —Ä–µ–±–µ–Ω–∫–∞ –≤ `FamilyMembers.tsx`
   - –ù–∞–∂–∏–º–∞–µ—Ç "–ù–∞—á–∞—Ç—å –æ–ø—Ä–æ—Å" ‚Üí –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è `profileId` —Ä–µ–±–µ–Ω–∫–∞
   - –°–æ–∑–¥–∞–µ—Ç—Å—è `assessment` —Å `profile_id = profileId` —Ä–µ–±–µ–Ω–∫–∞
3. **–†–æ–¥–∏—Ç–µ–ª—å** –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã:
   - –û—Ç–≤–µ—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `answers` —Å `assessment_id`
   - –í—Å–µ –æ—Ç–≤–µ—Ç—ã —Å–≤—è–∑–∞–Ω—ã —Å –ø—Ä–æ—Ñ–∏–ª–µ–º —Ä–µ–±–µ–Ω–∫–∞ —á–µ—Ä–µ–∑ `assessment`
4. **–†–µ–∑—É–ª—å—Ç–∞—Ç—ã** –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ –ø—Ä–æ—Ñ–∏–ª—é —Ä–µ–±–µ–Ω–∫–∞:
   - `assessments.results_summary` —Å–æ–¥–µ—Ä–∂–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ä–µ–±–µ–Ω–∫–∞
   - –ú–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–µ–±–µ–Ω–∫–∞ –æ—Ç–¥–µ–ª—å–Ω–æ

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏

### –ü—Ä–∞–≤–∏–ª—å–Ω–æ:
- ‚úÖ `assessments.profile_id` ‚Üí `profiles.id` (—á–µ–∫–∞–ø –ø—Ä–∏–≤—è–∑–∞–Ω –∫ —Ä–µ–±–µ–Ω–∫—É)
- ‚úÖ `profiles.user_id` ‚Üí `users.id` (–ø—Ä–æ—Ñ–∏–ª—å –ø—Ä–∏–≤—è–∑–∞–Ω –∫ —Ä–æ–¥–∏—Ç–µ–ª—é)
- ‚úÖ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç, —á—Ç–æ —Ä–æ–¥–∏—Ç–µ–ª—å –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å–æ —Å–≤–æ–∏–º–∏ –¥–µ—Ç—å–º–∏
- ‚úÖ –ß–µ–∫–∞–ø –ø—Ä–æ—Ö–æ–¥–∏—Ç —Ä–æ–¥–∏—Ç–µ–ª—å, –Ω–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ—Ç–Ω–æ—Å—è—Ç—Å—è –∫ —Ä–µ–±–µ–Ω–∫—É

### –í–∞–∂–Ω–æ:
- –ß–µ–∫–∞–ø –¥–æ–ª–∂–µ–Ω —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è —Å `profile_id` —Ä–µ–±–µ–Ω–∫–∞ (–Ω–µ —Ä–æ–¥–∏—Ç–µ–ª—è!)
- –ü—Ä–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å `profileId` —Ä–µ–±–µ–Ω–∫–∞ –≤ URL
- `currentProfileId` –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å ID —Ä–µ–±–µ–Ω–∫–∞, –¥–ª—è –∫–æ—Ç–æ—Ä–æ–≥–æ –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ–∫–∞–ø

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

1. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏—è –≤ `FamilyMembers.tsx` - —Ç–µ–ø–µ—Ä—å –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è `profileId` –≤ URL
2. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏—è –≤ `CheckupIntro.tsx` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `profileId` –∏–∑ URL –∏–ª–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
3. ‚úÖ `CheckupQuestions.tsx` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π `profileId` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è assessment

## üìù –í—ã–≤–æ–¥

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö **–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è**:
- –ß–µ–∫–∞–ø –ø—Ä–∏–≤—è–∑–∞–Ω –∫ –ø—Ä–æ—Ñ–∏–ª—é —Ä–µ–±–µ–Ω–∫–∞ (`assessments.profile_id`)
- –†–æ–¥–∏—Ç–µ–ª—å –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ–∫–∞–ø, –Ω–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ—Ç–Ω–æ—Å—è—Ç—Å—è –∫ —Ä–µ–±–µ–Ω–∫—É
- RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—é—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –í—Å–µ —Å–≤—è–∑–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã



