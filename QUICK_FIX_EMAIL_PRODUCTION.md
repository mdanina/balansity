# ‚ö° –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ: –ù–µ –ø—Ä–∏—Ö–æ–¥—è—Ç –ø–∏—Å—å–º–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

## üéØ –ü—Ä–æ–±–ª–µ–º–∞
–ù–∞ –ø—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–≤–µ—Ä–µ –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç –ø–∏—Å—å–º–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.

## ‚úÖ –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ (5 –º–∏–Ω—É—Ç)

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh user@–≤–∞—à-—Å–µ—Ä–≤–µ—Ä

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–∑–∞–º–µ–Ω–∏—Ç–µ –ø—É—Ç—å –Ω–∞ –≤–∞—à)
docker compose -f /opt/beget/supabase/docker-compose.yml exec auth env | grep GOTRUE
```

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```
GOTRUE_MAILER_AUTOCONFIRM=false          # ‚Üê –í–ê–ñ–ù–û: false –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
GOTRUE_SITE_URL=https://–≤–∞—à-–¥–æ–º–µ–Ω.com
GOTRUE_SMTP_HOST=smtp.beget.com
GOTRUE_SMTP_PORT=587
GOTRUE_SMTP_USER=–≤–∞—à-email@beget.com
GOTRUE_SMTP_PASS=–≤–∞—à-–ø–∞—Ä–æ–ª—å
GOTRUE_SMTP_ADMIN_EMAIL=noreply@–≤–∞—à-–¥–æ–º–µ–Ω.com
```

### –®–∞–≥ 2: –ï—Å–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –Ω–µ—Ç –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `.env` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
nano /opt/beget/supabase/.env
```

–î–æ–±–∞–≤—å—Ç–µ/–∏–∑–º–µ–Ω–∏—Ç–µ:

```env
# –í–ê–ñ–ù–û: false –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è email
GOTRUE_MAILER_AUTOCONFIRM=false

# URL –≤–∞—à–µ–≥–æ —Å–∞–π—Ç–∞
GOTRUE_SITE_URL=https://–≤–∞—à-–¥–æ–º–µ–Ω.com

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ SMTP
GOTRUE_SMTP_HOST=smtp.beget.com
GOTRUE_SMTP_PORT=587
GOTRUE_SMTP_USER=–≤–∞—à-email@beget.com
GOTRUE_SMTP_PASS=–≤–∞—à-–ø–∞—Ä–æ–ª—å
GOTRUE_SMTP_ADMIN_EMAIL=noreply@–≤–∞—à-–¥–æ–º–µ–Ω.com
GOTRUE_SMTP_SENDER_NAME=Little Otter
```

### –®–∞–≥ 3: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä auth

```bash
cd /opt/beget/supabase
docker compose restart auth
```

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–Ω–æ–≤–∞

```bash
docker compose exec auth env | grep GOTRUE_MAILER_AUTOCONFIRM
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å: `GOTRUE_MAILER_AUTOCONFIRM=false`

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏

```bash
# –°–ª–µ–¥–∏—Ç–µ –∑–∞ –ª–æ–≥–∞–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
docker compose logs -f auth
```

–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ —Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫.

## üö® –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

### –û—à–∏–±–∫–∞ 1: `GOTRUE_MAILER_AUTOCONFIRM=true`
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ—Ç–∫–ª—é—á–µ–Ω–æ  
**–†–µ—à–µ–Ω–∏–µ:** –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `GOTRUE_MAILER_AUTOCONFIRM=false`

### –û—à–∏–±–∫–∞ 2: –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è
**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω  
**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `docker compose down && docker compose up -d` –≤–º–µ—Å—Ç–æ `restart`

### –û—à–∏–±–∫–∞ 3: SMTP authentication failed
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å  
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ SMTP –≤ –ø–∞–Ω–µ–ª–∏ —Ö–æ—Å—Ç–∏–Ω–≥–∞

### –û—à–∏–±–∫–∞ 4: Connection refused
**–ü—Ä–æ–±–ª–µ–º–∞:** SMTP –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω  
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å `smtp.beget.com:587`

## üìã –ß–µ–∫–ª–∏—Å—Ç

- [ ] `GOTRUE_MAILER_AUTOCONFIRM=false` (–Ω–µ `true`!)
- [ ] –í—Å–µ SMTP –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã
- [ ] –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä auth –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω
- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤–∏–¥–Ω—ã –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
- [ ] –õ–æ–≥–∏ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –æ—à–∏–±–æ–∫

## üîç –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç:

```bash
node check-email-config.js --docker-compose /opt/beget/supabase/docker-compose.yml
```

## üìû –ï—Å–ª–∏ –Ω–µ –ø–æ–º–æ–≥–ª–æ

–°–º. –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é: `FIX_EMAIL_CONFIRMATION_PRODUCTION.md`
