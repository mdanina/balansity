# –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ÆKassa

## üéØ –¶–µ–ª—å

–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–∏–µ–º –æ–ø–ª–∞—Ç—ã –∑–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –ÆKassa –∑–∞ 5 –º–∏–Ω—É—Ç.

## ‚ö° –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –®–∞–≥ 1: –ü–æ–ª—É—á–∏—Ç–µ –∫–ª—é—á–∏ –ÆKassa

1. –ó–∞–π–¥–∏—Ç–µ –≤ [–ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –ÆKassa](https://yookassa.ru/)
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ:
   - **Shop ID** 
   - **–°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á**

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Backend

```bash
cd queue-worker
npm install
```

–°–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª:

**Windows:**
```bash
copy .env.example .env
```

**Linux/Mac:**
```bash
cp .env.example .env
```

–ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤—Ä—É—á–Ω—É—é –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∏–∑ `.env.example`.

```env
SUPABASE_URL=https://oyuyienekon.beget.app
SUPABASE_SERVICE_ROLE_KEY=–≤–∞—à-key

API_PORT=3001
API_BASE_URL=https://–≤–∞—à-–¥–æ–º–µ–Ω.com  # –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ ngrok URL
FRONTEND_URL=http://localhost:5173

# –¢–µ—Å—Ç–æ–≤—ã–µ –∫–ª—é—á–∏ –ÆKassa (—É–∂–µ –≤—Å—Ç–∞–≤–ª–µ–Ω—ã)
YUKASSA_SHOP_ID=1219382
YUKASSA_SECRET_KEY=test_UNRmTdMtTWuCm362Zkzn0xWhP8CVu_cvxKQ_jxjVXUg
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –¢–µ—Å—Ç–æ–≤—ã–µ –∫–ª—é—á–∏ —É–∂–µ –≤—Å—Ç–∞–≤–ª–µ–Ω—ã –≤ `.env.example` - –ø—Ä–æ—Å—Ç–æ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª!

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Frontend

–í –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ–∑–¥–∞–π—Ç–µ/–æ–±–Ω–æ–≤–∏—Ç–µ `.env.local`:

```env
VITE_API_URL=http://localhost:3001
```

–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:
```env
VITE_API_URL=https://–≤–∞—à-–¥–æ–º–µ–Ω.com/api
```

### –®–∞–≥ 4: –ó–∞–ø—É—Å—Ç–∏—Ç–µ

**Backend:**
```bash
cd queue-worker
npm run dev
```

**Frontend:**
```bash
npm run dev
```

### –®–∞–≥ 5: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Webhook

**–î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ ngrok (—Å–º. [LOCAL_TESTING_WEBHOOK.md](./LOCAL_TESTING_WEBHOOK.md))
- URL: `https://–≤–∞—à-ngrok-url.ngrok.io/api/webhook/yookassa`

**–î–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞:**
- URL: `https://–≤–∞—à-–¥–æ–º–µ–Ω.com/api/webhook/yookassa`
- –°–æ–±—ã—Ç–∏—è: `payment.succeeded`, `payment.canceled`

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ–ø–ª–∞—Ç—ã –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
2. –ù–∞–∂–º–∏—Ç–µ "–û–ø–ª–∞—Ç–∏—Ç—å"
3. –î–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è –≤–∏–¥–∂–µ—Ç –ÆKassa
4. –ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –ø–ª–∞—Ç–µ–∂ –¥–æ–ª–∂–µ–Ω –æ–±–Ω–æ–≤–∏—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

## üìñ –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–°–º. [YOOKASSA_INTEGRATION.md](./YOOKASSA_INTEGRATION.md) –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.

