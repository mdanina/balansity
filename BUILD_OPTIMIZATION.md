# üöÄ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –±–∏–ª–¥–∞ –ø—Ä–æ–µ–∫—Ç–∞

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –±–∏–ª–¥–∞:

### 1. –†–æ—Å—Ç —Ä–∞–∑–º–µ—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- –î–æ–±–∞–≤–ª—è–µ—Ç—Å—è –Ω–æ–≤—ã–π –∫–æ–¥
- –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –†–∞—Å—Ç–µ—Ç —Ä–∞–∑–º–µ—Ä bundle

### 2. –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–∞–º—è—Ç—å—é –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ RAM –¥–ª—è Node.js
- Vite —Ç—Ä–µ–±—É–µ—Ç –ø–∞–º—è—Ç–∏ –¥–ª—è —Å–±–æ—Ä–∫–∏
- –ú–µ–¥–ª–µ–Ω–Ω—ã–π swap

### 3. –ù–∞–∫–æ–ø–ª–µ–Ω–∏–µ –∫–µ—à–µ–π –∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤
- –°—Ç–∞—Ä—ã–µ –∫–µ—à–∏ `node_modules/.vite`
- –°—Ç–∞—Ä—ã–µ –∫–µ—à–∏ –±–∏–ª–¥–∞ –≤ `dist`
- –ù–µ–æ—á–∏—â–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### 4. –î–∏—Å–∫–æ–≤–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ
- –ü–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–Ω—ã–π –¥–∏—Å–∫
- –ú–µ–¥–ª–µ–Ω–Ω–∞—è –∑–∞–ø–∏—Å—å

## üîß –†–µ—à–µ–Ω–∏—è:

### –®–∞–≥ 1: –û—á–∏—Å—Ç–∫–∞ –ø–µ—Ä–µ–¥ –±–∏–ª–¥–æ–º

–î–æ–±–∞–≤—å—Ç–µ —Å–∫—Ä–∏–ø—Ç –≤ `package.json`:

```json
{
  "scripts": {
    "clean": "rm -rf dist node_modules/.vite",
    "build:clean": "npm run clean && npm run build",
    "build:prod": "npm run clean && NODE_OPTIONS='--max-old-space-size=4096' vite build"
  }
}
```

### –®–∞–≥ 2: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Vite –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–û–±–Ω–æ–≤–∏—Ç–µ `vite.config.ts`:

```typescript
export default defineConfig(({ mode }) => ({
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
  
  build: {
    // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –ª–∏–º–∏—Ç —Ä–∞–∑–º–µ—Ä–∞ —á–∞–Ω–∫–∞ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
    chunkSizeWarningLimit: 1000,
    
    // –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–æ–ª–ª–∞–ø–∞
    rollupOptions: {
      output: {
        // –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ vendor —á–∞–Ω–∫–æ–≤
        manualChunks: {
          'react-vendor': ['react', 'react-dom', 'react-router-dom'],
          'ui-vendor': ['@radix-ui/react-dialog', '@radix-ui/react-dropdown-menu', /* ... */],
          'utils-vendor': ['@supabase/supabase-js', '@tanstack/react-query', 'zod'],
        },
      },
    },
    
    // –ú–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è
    minify: 'terser',
    terserOptions: {
      compress: {
        drop_console: mode === 'production', // –£–±–∏—Ä–∞–µ–º console.log –≤ –ø—Ä–æ–¥–µ
      },
    },
    
    // –û—Ç–∫–ª—é—á–∞–µ–º source maps –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    sourcemap: false,
  },
}));
```

### –®–∞–≥ 3: –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ Node.js

–ü—Ä–∏ –±–∏–ª–¥–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:

```bash
NODE_OPTIONS='--max-old-space-size=4096' npm run build
```

–ò–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ `package.json`:
```json
{
  "scripts": {
    "build": "NODE_OPTIONS='--max-old-space-size=4096' vite build"
  }
}
```

### –®–∞–≥ 4: –û—á–∏—Å—Ç–∫–∞ node_modules (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

```bash
rm -rf node_modules package-lock.json
npm install
```

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞

```bash
df -h  # –ü–æ–∫–∞–∑–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–∞
du -sh node_modules dist  # –†–∞–∑–º–µ—Ä –ø–∞–ø–æ–∫
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±–∏–ª–¥–∞:

### –ó–∞–ø—É—Å–∫ —Å —Ç–∞–π–º–∏–Ω–≥–æ–º:
```bash
time npm run build
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ bundle:
```bash
npm run build && du -sh dist
```

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞–º—è—Ç–∏:**
   ```bash
   free -h
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏—Å–∫–∞:**
   ```bash
   df -h
   ```

3. **–û—á–∏—Å—Ç–∫–∞ –∫–µ—à–µ–π:**
   ```bash
   rm -rf node_modules/.vite dist
   ```

4. **–ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ —Å –Ω—É–ª—è:**
   ```bash
   rm -rf node_modules package-lock.json
   npm install
   npm run build
   ```

